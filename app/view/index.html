<html lang='en'>
<head>
  <meta charset='utf-8'>
  <link rel='stylesheet' href='../static/style.css'>
  <script src='../static/client.js'></script>
</head>
<body>
<div>
  <div class='center'>
    <div class='title'>What time is it?</div>
    <p>
      Telling time without a clock is a important life skill. Whether you're out camping or want to be rugged like Crocodile Dundee. You can do this by looking at the sky! And if you're near a computer or iphone, you can use this app! I've trained a neural net with images of Pacifica Pier. To try it out you can use some of my pictures <a href = "https://drive.google.com/open?id=1RlWvWmMUU05wAH6f9IMntr_1pBQ3sKG4" target="_blank">here</a>. The first number in the filename denotes the hour of the day. You can also try uploading your own image and see how it works. If you're on a smartphone, the upload image button should open your camera app.
    </p>

    <div class='content'>
      <div class='no-display'>
        <input id='file-input'
               class='no-display'
               type='file'
               name='file'
               accept='image/*'
               onchange='showPicked(this)'>
      </div>
      <button class='choose-file-button' type='button' onclick='showPicker()'>Upload Image</button>
      <div class='upload-label'>
        <label id='upload-label'>No file chosen</label>
      </div>
      <div>
        <img id='image-picked' class='no-display' alt='Chosen Image' height='200'>
      </div>

      <div class='analyze'>
        <button id='analyze-button' class='analyze-button' type='button' onclick='analyze()'>Analyze Image</button>
      </div>
      <div class='result-label'>
        <label id='result-label'></label>
      </div>
    </div>

    <p>
      My full dataset can be found <a href = "https://photos.app.goo.gl/L1Y7WzNtULc2C2yx6">here</a>. These are 30 second timelapses from midnight to midnight at 30fps. So each movie has 900 frames taken over 24 hours. I have 28 days worth of data and counting. Below is the full confusion matrix on my training data. The classifier doesn't work so well when it's fully cloudy or foggy otherwise I was surprised to learn it can be +/- 1 hour on a clear day totally able to distinguish between morning and evening. So it must look at features other than just brightness. Next step is figuring out what features it's looking at!<BR>
      <img src="https://raw.githubusercontent.com/jimmysastra/fastai-v3/master/app/view/confusion-matrix.png" alt="Confusion matrix" width="480">
    </p>
    <p>
    Here's a live view of my Nest camera you can use to create images. The connection seems to be a bit finnicky so you may need to refresh this page if so. <iframe type="text/html" frameborder="0" width="480" height="394" src="//video.nest.com/embedded/live/dJ8wiIXlXd?autoplay=1" allowfullscreen></iframe>
    </p>
    <p>
        Props to Jeremy Howard. I'm following his fast.ai tutorials <a href="https://www.fast.ai/">here</a>.	
    </p>
  </div>
</div>
</body>
</html>
